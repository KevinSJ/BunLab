@page "/color"
@using BunLab.Client.Core.Colors

<div id="Color">

    <h1 class="display-4">Color Info</h1>
    <hr />

    <div>
        <div>
            <input @bind="input" class="form-control" @oninput="OnColorTextInputed" placeholder="输入颜色，支持的格式：#FF0000、rgb(255,0,0)、rgba(255,0,0,0.1)、red" />
        </div>

        @if (color.HasValue)
        {
            var colorValue = color.Value;

            <div class="row mt-3">
                <div class="col-12 col-lg-6 col-xl-4">

                    <div class="card">
                        <svg xmlns="http://www.w3.org/2000/svg" class="card-img-top" style="height: 180px;">
                            <rect width="100%" height="100%" fill="@colorValue.GetRGBAFormat()"></rect>
                        </svg>
                        <div class="card-body text-center text-monospace font-weight-bolder">
                            <h5 class="card-title">@colorValue.GetHEXFormat()</h5>
                            <h5 class="card-title">@colorValue.GetRGBAFormat()</h5>
                            <h5 class="card-title">@colorValue.GetHSLAFormat()</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <span>R<small>ed</small></span>
                                <span class="float-right">@colorValue.R</span>
                            </li>
                            <li class="list-group-item">
                                <span>G<small>reen</small></span>
                                <span class="float-right">@colorValue.G</span>
                            </li>
                            <li class="list-group-item">
                                <span>B<small>lue</small></span>
                                <span class="float-right">@colorValue.B</span>
                            </li>
                            <li class="list-group-item">
                                <span>A<small>lpha</small></span>
                                <span class="float-right">@colorValue.GetCssColorAlpha()</span>
                            </li>
                            <li class="list-group-item">
                                <span>H<small>ue</small></span>
                                <span class="float-right">@colorValue.GetHue()</span>
                            </li>
                            <li class="list-group-item">
                                <span>S<small>aturation</small></span>
                                <span class="float-right">@colorValue.GetSaturation().ToString("P0")</span>
                            </li>
                            <li class="list-group-item">
                                <span>L<small>ightness</small></span>
                                <span class="float-right">@colorValue.GetBrightness().ToString("P0")</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

@code {
    private string input = String.Empty;
    private Nullable<System.Drawing.Color> color = null;

    private void OnColorTextInputed(ChangeEventArgs args)
    {
        input = args.Value.ToString();

        try
        {
            color = BunColorConverter.FromString(input.Replace(" ", String.Empty));
        }
        catch
        {
            color = null;
        }
    }
}
